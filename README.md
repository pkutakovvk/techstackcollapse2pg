# techstackcollapse2pg
Пример структуры БД и скрипта для pgbench для прогона оценочной нагрузки, которая включает в себя:
- 10 полнотекстовых поисков в таблице с товарами
- сохранение команды (JSON)
- создание записи в очереди задач
- чтение из очереди задач
- выполнение финансовых транзакционных действий (модель по тесту TPC-C)
- обновление статуса команды (JSON документ)
- запись в очередь уведомлений
- чтение из очереди уведомлений

**Инициализация**

Инициализация БД производится вручную путем выполения скриптов:
```
psql -d <yourdatabase> -f ddl.sql
psql -d <yourdatabase> -f generate.sql
```
(если ваш PostgreSQL сервер запущен удаленно, необходимо добавить параметры для коннекта)

**Запуск теста**
```
/* run with 10 clients using 5 threads for 600 seconds and report every 5 seconds*/
pgbench -c 10 -j 5 -T 600 -P 5 -f run.sql 
```

